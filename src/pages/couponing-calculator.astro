---
import Layout from '../layouts/Layout.astro';

// Initialize variables
let originalPrice = 0;
let couponValue = 0;
let finalPrice = null;
---

<Layout title="Couponing Calculator - Money Mastery Resources">
  <main class="container mx-auto px-4 py-8">
    <section class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-6">
      <h1 class="text-2xl font-bold mb-6 text-center">Couponing Calculator</h1>
      
      <form id="couponForm" class="space-y-4">
        <div>
          <label for="originalPrice" class="block text-sm font-medium text-gray-700 mb-1">
            Original Price ($)
          </label>
          <input 
            type="number" 
            id="originalPrice" 
            name="originalPrice" 
            min="0" 
            step="0.01"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"
            required
          />
        </div>

        <div>
          <label for="couponValue" class="block text-sm font-medium text-gray-700 mb-1">
            Coupon Value ($)
          </label>
          <input 
            type="number" 
            id="couponValue" 
            name="couponValue"
            min="0" 
            step="0.01"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"
            required
          />
        </div>

        <button 
          type="submit"
          class="w-full bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 transition-colors duration-300"
        >
          Calculate Savings
        </button>
      </form>

      <div id="results" class="mt-6 hidden">
        <div class="p-4 bg-gray-50 rounded-md">
          <h3 class="font-semibold text-lg mb-2">Results</h3>
          <p>Original Price: $<span id="displayOriginalPrice">0.00</span></p>
          <p>Coupon Value: $<span id="displayCouponValue">0.00</span></p>
          <p class="text-lg font-bold text-primary-600 mt-2">
            Final Price: $<span id="displayFinalPrice">0.00</span>
          </p>
          <p class="text-sm text-gray-600 mt-2">
            Total Savings: $<span id="displaySavings">0.00</span>
          </p>
        </div>
      </div>
    </section>
  </main>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('couponForm');
    const results = document.getElementById('results');

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const originalPrice = parseFloat(document.getElementById('originalPrice').value);
      const couponValue = parseFloat(document.getElementById('couponValue').value);
      
      // Calculate final price
      const finalPrice = Math.max(0, originalPrice - couponValue);
      const savings = originalPrice - finalPrice;
      
      // Update display
      document.getElementById('displayOriginalPrice').textContent = originalPrice.toFixed(2);
      document.getElementById('displayCouponValue').textContent = couponValue.toFixed(2);
      document.getElementById('displayFinalPrice').textContent = finalPrice.toFixed(2);
      document.getElementById('displaySavings').textContent = savings.toFixed(2);
      
      // Show results
      results.classList.remove('hidden');
    });
  });
</script>

<style>
  input[type="number"] {
    -moz-appearance: textfield;
  }
  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
</style>
